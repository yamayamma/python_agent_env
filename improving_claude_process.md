はい、承知いたしました。
各段階で利用するプロンプトを`/commands`として定義し、それらを参照する形でワークフロー全体を記した`CLAUDE.md`を作成します。

-----

### 1\. カスタムコマンド集

開発の各フェーズでコピー＆ペーストして使えるコマンド集です。

\<details\>
\<summary\>\<code\>/init\</code\> - 開発初期の調査を開始する\</summary\>

```
# Command: /init

# 役割
あなたは、担当する機能の技術仕様やビジネス要件を深く理解しようとする、優秀なシニアソフトウェアエンジニアです。

# 目的
[ここに開発したい機能の概要を記述] の開発に向けた調査を開始します。

# コンテキスト
- 関連ドキュメント: [仕様書、議事録、デザインファイル等のURLや内容を貼り付け]
- 関連コード: [参考にする既存コードのスニペットやファイル名を指定]
- 期待される成果: [この機能がビジネス上・技術上達成すべきこと]

# 指示
提供された情報に基づき、以下の点について日本語で詳細に洗い出してください。
- 機能を実現するための技術的なアプローチの候補
- 開発を進める上で考慮すべき点や潜在的なリスク
- 仕様が不明確な点や、確認が必要な事項のリスト
```

\</details\>

\<details\>
\<summary\>\<code\>/plan\_wbs\</code\> - WBS(作業分解構成図)を作成する\</summary\>

```
# Command: /plan_wbs

# 役割
あなたは、複雑なプロジェクトを管理可能なタスクに分解することを得意とする、経験豊富なプロジェクトマネージャーです。

# コンテキスト
`/init`での調査結果に基づき、開発タスクを具体的に計画します。
調査結果の要約：[調査結果のサマリーをここに記述]

# 指示
以下の要件でWBS(作業分解構成図)を日本語で作成してください。

# 要件
- 階層構造でタスクを表現する
- 各タスクには一意のID（例: 1.1, 1.2.1）を付与する
- 各タスクには担当（セッションA or B）と依存関係を明記する
- 出力形式はMarkdownのテーブル形式とする

# WBSの例
| ID    | タスク名                 | 担当       | 依存タスク | 状態   |
| :---- | :----------------------- | :--------- | :--------- | :----- |
| 1.0   | **テスト関連** | セッションA | -          | 未着手 |
| 2.0   | **実装関連** | セッションB | 1.0        | 未着手 |
```

\</details\>

\<details\>
\<summary\>\<code\>/create\_tests\</code\> - テストコードを作成する\</summary\>

```
# Command: /create_tests

# 役割
あなたは、テスト自動化を専門とするQAエンジニアです。カバレッジが高く、エッジケースを考慮した高品質なテストコードを作成します。

# コンテキスト
- 現在のGitブランチ: `[現在のブランチ名を記述]`
- 使用するテストフレームワーク: `[pytest, Jest, etc.]`
- 作成対象のWBS:
[関連するWBSのMarkdownテーブルを貼り付け]

# 指示
上記のWBSに基づき、関連するタスクのテストコードをすべて生成してください。
現時点では実装コードは存在しないため、テストは失敗することを前提とします。コードには、各テストがWBSのどのタスクIDに対応するのかコメントで明記してください。
```

\</details\>

\<details\>
\<summary\>\<code\>/implement\_code\</code\> - テストをパスする実装を行う\</summary\>

````
# Command: /implement_code

# 役割
あなたは、TDD(テスト駆動開発)を実践する熟練のソフトウェアエンジニアです。提供されたテストをパスすることを唯一の目的として、クリーンで効率的なコードを記述します。

# コンテキスト
- 現在のGitブランチ: `[現在のブランチ名を記述]`
- パスすべきテストコード:
```[ここにテストコードを貼り付け]```

# 【重要ルール】
提供されたテストコードは一切変更してはいけません。

# 指示
上記のテストコードをすべてパスするための実装コードを生成してください。まずはWBSのタスクID `[着手するタスクID]` の実装に着手します。
````

\</details\>

\<details\>
\<summary\>\<code\>/update\_wbs\</code\> - WBSの進捗を更新する\</summary\>

```
# Command: /update_wbs

# 役割
あなたは正確なプロジェクト管理者です。

# コンテキスト
WBSのタスクID `[完了したタスクID]` が完了しました。

# 指示
現在のWBSの状態を更新し、最新版のMarkdownテーブルを出力してください。
[現在のWBSテーブルを貼り付け]
```

\</details\>

\<details\>
\<summary\>\<code\>/create\_commit\_message\</code\> - コミットメッセージを生成する\</summary\>

````
# Command: /create_commit_message

# 役割
あなたは、Conventional Commitsの規約に精通したエンジニアです。変更内容を的確に要約したコミットメッセージを作成します。

# コンテキスト
- Gitブランチ `[ブランチ名]` での全ての開発タスクが完了し、全テストをパスしました。
- 関連WBS: [関連するWBSのMarkdownテーブルを貼り付け]
- 最終的なコード:
```[最終的な実装コードを貼り付け]```

# 指示
今回の変更内容を要約し、Conventional Commitsの規約に基づいたコミットメッセージを生成してください。
- 本文には、実装した機能の概要と、関連するWBSのタスクIDを箇条書きで記載してください。
````

\</details\>

\<details\>
\<summary\>\<code\>/create\_pr\_description\</code\> - プルリクエストの説明文を生成する\</summary\>

```
# Command: /create_pr_description

# 役割
あなたは、レビュアーが変更内容を素早く理解できるよう、丁寧で分かりやすいドキュメントを作成するエンジニアです。

# コンテキスト
- Gitブランチ `[ブランチ名]` のプルリクエストを作成します。
- 関連WBS: [関連するWBSのMarkdownテーブルを貼り付け]
- 関連コミットメッセージ:
`[コミットメッセージを貼り付け]`

# 指示
レビュアーに向けて、このプルリクエストの概要、変更点、テスト内容をまとめた説明文を日本語で生成してください。WBSをサマリーとして含め、レビュアーに特に確認してほしい点をハイライトしてください。
```

\</details\>

-----

### 2\. CLAUDE.md

以下は、プロジェクトのリポジトリに配置する`CLAUDE.md`ファイルの内容です。

-----

# CLAUDE.md: AI支援開発ワークフロー

このドキュメントは、本プロジェクトにおいてClaude AIを開発パートナーとして活用するための標準ワークフローを定義します。全員がこの手順に従うことで、生産性と品質の一貫性を高めることを目的とします。

### 基本的な考え方

  * **2セッション体制**: 開発は原則として2つのClaudeセッションを並行して進めます。
      * **セッションA (テスト担当)**: テストコードの作成と管理に特化します。
      * **セッションB (実装担当)**: 計画、実装、コミットなど、テスト以外の全般を担当します。
  * **コマンド駆動**: 各フェーズでは、定義済みの `/commands` を使用して、Claudeへの指示を標準化します。

-----

## ワークフロー全体像

1.  **【調査】** - `/init`
2.  **【計画】** - `/plan_wbs`
3.  **【ブランチ作成】** - `git checkout` (手動)
4.  **【実装 (TDD)】**
      * テスト作成 - `/create_tests`
      * 実装 - `/implement_code`
      * 進捗更新 - `/update_wbs`
5.  **【コミット & PR】**
      * コミットメッセージ生成 - `/create_commit_message`
      * PR作成 - `/create_pr_description` (手動+AI)

-----

## 各ステップの詳細

### ステップ1: 調査

  * **目的**: 開発機能の要件と仕様をAIに深く理解させる。
  * **アクション**:
    1.  **セッションB**で `/init` コマンドを実行します。
    2.  `[ ]` の部分に必要な情報を埋めて、Claudeに調査を依頼します。
    3.  出力されたリスクや不明点リストをチームで確認します。

### ステップ2: 計画

  * **目的**: 調査結果を基に、具体的な作業タスクを構造化（WBS化）する。
  * **アクション**:
    1.  引き続き**セッションB**で `/plan_wbs` コマンドを実行します。
    2.  調査結果の要約をコンテキストとして与え、WBSの作成を指示します。

### ステップ3: ブランチ作成

  * **目的**: 新機能の開発をメインのコードから隔離する。
  * **アクション**:
    1.  **(開発者の手動作業)** ターミナルで、WBSに基づいた適切な名前のfeatureブランチを作成します。
        ```bash
        git checkout -b feat/[feature-name]
        ```

### ステップ4: 実装 (TDD)

  * **目的**: テストを先行させ、品質を担保しながら機能実装を行う。
  * **アクション**:
    1.  **(セッションA)** `/create_tests` コマンドを実行し、WBSに基づいたテストコードを生成させます。
    2.  **(セッションB)** `/implement_code` コマンドを実行します。コンテキストとしてセッションAが作ったテストコードを貼り付け、実装を指示します。
    3.  **(開発者の手動作業)** セッションBが生成したコードでテストを実行します。
    4.  テストが失敗した場合、結果をセッションBにフィードバックし、修正を依頼します。このサイクルをテストが全てパスするまで繰り返します。
    5.  キリの良い単位でタスクが完了したら、**セッションB**で `/update_wbs` を実行し、進捗を更新させます。

### ステップ5: コミット & プルリクエスト

  * **目的**: 完成したコードをバージョン管理し、チームにレビューを依頼する。
  * **アクション**:
    1.  **(セッションB)** `/create_commit_message` コマンドを実行し、規約に沿ったコミットメッセージを生成させます。
    2.  **(開発者の手動作業)** 生成されたメッセージを使って、コードをコミットし、リモートにプッシュします。
    3.  **(セッションB)** `/create_pr_description` コマンドを実行し、プルリクエストの説明文を生成させます。
    4.  **(開発者の手動作業)** GitHubなどでプルリクエストを作成し、生成された説明文を貼り付けて、レビューを依頼します。